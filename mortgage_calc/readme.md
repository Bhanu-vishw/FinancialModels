# Loan Amortization 

This repository contains the implementation of functions to generate and analyze a loan amortization schedule. The project consists of two main components:  

## Overview  

### **Key Functions in `mortgage.py`**  
1. **`amortize`**  
   - Generates a loan amortization schedule.  
   - Calculates how an initial loan balance accrues interest and is paid off over time.  

2. **`to_csv`**  
   - Writes the loan amortization schedule to a CSV file.  

### **Analysis in `analysis.ipynb`**  
- Explore and investigate loan mechanics.  
- Guided calculations for deeper insights into how loans work, even if youâ€™re new to loan math.  

---

## **Implementation Details**  

### **`amortize` Function**  

#### **Inputs**  
- **`apr`**: Annual percentage rate for the loan.  
- **`years`**: Loan term in years.  
- **`balance`**: Starting loan balance.  
- **`monthly_pmt`** (optional): Monthly payment amount. If not provided, the function computes the payment required to exactly pay off the loan in the given term.  

#### **Output**  
A dictionary with keys and values as lists, including:  
- `period`: Current month of the projection.  
- `start_bal`: Starting loan balance at the beginning of the period.  
- `interest`: Interest accrued during the period.  
- `bal_after_int`: Balance after interest accrual.  
- `pmt`: Monthly payment amount.  
- `bal_after_pmt`: Balance after applying the monthly payment.  
- `principal_repaid`: Principal repaid during the period.  

#### **Algorithm Steps**  
1. **Initialization**:  
   - Compute the total number of payments (`n`) and monthly effective interest rate (`i = apr / 12`).  
   - If `monthly_pmt` is not provided, calculate it using the annuity factor formula.  

2. **Projection**:  
   - Use a recurrence relationship to populate the amortization schedule.  
   - Stop projecting once the loan balance is paid off (i.e., balance is negligible).  

---

### **`to_csv` Function**  
Writes the amortization schedule generated by `amortize` to a CSV file.  
- Example arguments:  
  ```python
  {"apr": 0.05, "years": 5, "balance": 100000}

